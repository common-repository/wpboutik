function toggleDivDisabled(e){var a=document.getElementById("paypaldiv");e?a.classList.add("disabled"):a.classList.remove("disabled")}function validateInputs(){var e,a={},t={shipping_first_name:["shipping_first_name",ajax_var_checkout.shipping_first_name_required_label,/^[a-zA-Z0-9]+$/,"First Name must be letters only"],shipping_last_name:["shipping_last_name",ajax_var_checkout.shipping_last_name_required_label,/^[a-zA-Z0-9]+$/,"Last Name must be letters only"],email_address:["email_address",ajax_var_checkout.email_address_required_label,/^[a-zA-Z0-9+.]+@[a-zA-Z0-9]+\.[a-zA-Z0-9]+$/,"Email must be a valid email"],shipping_address:["shipping_address",ajax_var_checkout.shipping_address_required_label,/^\s*\S+(?:\s+\S+){2}/,"Address must be letters only"],shipping_city:["shipping_city",ajax_var_checkout.shipping_city_required_label,/^[a-zA-Z]+$/,"City must be letters only"],shipping_country:["shipping_country",ajax_var_checkout.shipping_country_required_label,/^[a-zA-Z0-9]+$/,"Country must be letters only"],shipping_postal_code:["shipping_postal_code",ajax_var_checkout.shipping_postal_code_required_label,/^[0-9]+$/,"Postal code must be numerics only"],shipping_phone:["shipping_phone",ajax_var_checkout.shipping_phone_required_label,/^[0-9]+$/,"Phone must be numerics only"],terms:["terms","Terms is required",null,ajax_var_checkout.terms_required_label]};for(e in t){var r=t[e],n=document.getElementById(e),i=document.getElementsByClassName(r[0]+"Error")[0],c=n.value.trim();i.classList.remove("block"),i.classList.add("hidden"),n.classList.remove("border-red-500"),"terms"!==e||n.checked?""===c?a[r[0]]=r[1]:null!==r[2]&&r[2].length&&!c.match(r[2])&&(a[r[0]]=r[3]):a[e]=r[3]}var _,o=document.querySelector('input[name="delivery-method"]:checked');o&&(_=document.querySelector('button[data-method-id="'+o.value+'"]'),!document.querySelector('.replacedButton[data-method-id="'+o?.value+'"]'))&&_&&(a.delivery_method=ajax_var_checkout.delivery_method_required_label),jQuery.isEmptyObject(a)?toggleDivDisabled(!1):toggleDivDisabled(!0)}jQuery(document).ready(function(r){r("input").on("input",function(){validateInputs()});let t="",n="";paypal_sdk.Buttons({fundingSource:"paypal",style:{shape:"rect",height:40},onClick:()=>{r.ajax({type:"post",url:ajax_var_checkout.url,data:{action:"wpboutik_ajax_create_order",datas:r("#checkout_form").serialize(),nonce:ajax_var_checkout.nonce_create_order},success:function(e){e.success&&(t=e.order_id,n=e.url)}})},createOrder:async(e,a)=>{var t=new FormData;t.append("action","wpboutik_ajax_checkout_price"),t.append("method_shipping_id",r("input[type=radio][name=delivery-method]:checked").val()),t.append("shipping_country_key",r("#shipping_country").val()),t.append("nonce",ajax_var_checkout.nonce_paypal),t.append("datas",r("#checkout_form").serialize());t=await(await fetch(ajax_var_checkout.url,{method:"POST",body:t})).json();return a.order.create({purchase_units:[{amount:t}]})},onApprove:(e,a)=>a.order.capture().then(function(e){e=e.purchase_units[0].payments.captures[0];"COMPLETED"===e.status&&jQuery.ajax({type:"post",url:ajax_var_checkout.url,data:{action:"wpboutik_ajax_order_after_payment_paypal",payment_intent_id:e.id,transaction_fees:e.seller_receivable_breakdown&&e.seller_receivable_breakdown.paypal_fee?e.seller_receivable_breakdown.paypal_fee.value:0,order_id_finish:t,licenses:ajax_var_checkout.current_cart_licenses,nonce:ajax_var_checkout.nonce_finish_paypal},success:function(e){e.success&&(window.location.href=n)}})}),onCancel:function(e){jQuery.ajax({type:"post",url:ajax_var_checkout.url,data:{action:"wpboutik_ajax_order_cancel_payment",order_id:t,nonce:ajax_var_checkout.nonce_cancel}}),alert("Transaction annulée !")},onError(e){jQuery.ajax({type:"post",url:ajax_var_checkout.url,data:{action:"wpboutik_ajax_order_cancel_payment",order_id:t,nonce:ajax_var_checkout.nonce_cancel}}),alert("Le paiement à échoué ou a été refusé.")}}).render("#paypal-button-container")});