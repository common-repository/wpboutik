jQuery(document).ready(function(p){var h=Mollie(ajax_var_mollie_checkout.mollie_profile_ID,{locale:ajax_var_mollie_checkout.locale,testmode:ajax_var_mollie_checkout.mollie_test}),y=(h.createComponent("card",{styles:{base:{color:"rgba(0, 0, 0, 0.8)"}}}).mount("#cardmollie"),document.getElementById("checkout_form")),b=document.getElementById("form-error-mollie"),v=document.getElementById("card-button");function g(e){e?(document.querySelector("#card-button").disabled=!0,document.querySelector("#spinner").classList.remove("hidden")):(document.querySelector("#card-button").disabled=!1,document.querySelector("#spinner").classList.add("hidden"))}y.addEventListener("submit",function(e){if("mollie"===p("input[type=radio][name=payment-type]:checked").attr("id")){console.log("mollie"),e.preventDefault(),g(!0);var t,a={},r={shipping_first_name:["shipping_first_name",ajax_var_mollie_checkout.shipping_first_name_required_label,/^[a-zA-Z0-9]+$/,"First Name must be letters only"],shipping_last_name:["shipping_last_name",ajax_var_mollie_checkout.shipping_last_name_required_label,/^[a-zA-Z0-9]+$/,"Last Name must be letters only"],email_address:["email_address",ajax_var_mollie_checkout.email_address_required_label,/^[a-zA-Z0-9+.]+@[a-zA-Z0-9]+\.[a-zA-Z0-9]+$/,"Email must be a valid email"],shipping_address:["shipping_address",ajax_var_mollie_checkout.shipping_address_required_label,/^\s*\S+(?:\s+\S+){2}/,"Address must be letters only"],shipping_city:["shipping_city",ajax_var_mollie_checkout.shipping_city_required_label,/^[a-zA-Z]+$/,"City must be letters only"],shipping_country:["shipping_country",ajax_var_mollie_checkout.shipping_country_required_label,/^[a-zA-Z0-9]+$/,"Country must be letters only"],shipping_postal_code:["shipping_postal_code",ajax_var_mollie_checkout.shipping_postal_code_required_label,/^[0-9]+$/,"Postal code must be numerics only"],shipping_phone:["shipping_phone",ajax_var_mollie_checkout.shipping_phone_required_label,/^[0-9]+$/,"Phone must be numerics only"],terms:["terms","Terms is required",null,ajax_var_mollie_checkout.terms_required_label]};for(t in r){var l=r[t],i=document.getElementById(t),s=document.getElementsByClassName(l[0]+"Error")[0],n=i.value.trim();s.classList.remove("block"),s.classList.add("hidden"),i.classList.remove("border-red-500"),"terms"!==t||i.checked?""===n?a[l[0]]=l[1]:l[2]?.length&&!n.match(l[2])&&(a[l[0]]=l[3]):a[t]=l[3]}var e=document.querySelector('input[name="delivery-method"]:checked'),c=document.querySelector('button[data-method-id="'+e.value+'"]'),d=document.querySelector('.replacedButton[data-method-id="'+e?.value+'"]');let o;if(e&&!d&&c&&(a.delivery_method=ajax_var_mollie_checkout.delivery_method_required_label),0<Object.keys(a).length){for(var _ in a){var u=document.getElementById(_),m=document.getElementsByClassName(_+"Error")[0];u&&u.length&&u.classList.add("border-red-500"),m.classList.remove("hidden"),m.classList.add("block"),m.innerHTML=a[_]}g(!1)}else{b.textContent="",h.createToken().then(function(e){o=e.token;var e=e.error;e?(v.disabled=!1,b.textContent=e.message):((e=document.createElement("input")).setAttribute("name","token"),e.setAttribute("type","hidden"),e.setAttribute("value",o),e.setAttribute("id","token_input"),y.appendChild(e))}),$thisbutton=p(this),datas=p("#checkout_form").serialize();e=y.querySelector(".create_order"),d=p(e).data("nonce"),c={action:"wpboutik_ajax_create_order",datas:datas,nonce:d};p.ajax({type:"post",url:ajax_var_checkout.url,data:c,success:function(e){var t,a,r;e?.success&&({order_id:e,payment_type:t,total:a,url:r}=e,e)&&"mollie"==t&&p.ajax({type:"post",url:ajax_var_checkout.url,data:{action:"wpboutik_ajax_create_payment_mollie",order_id:e,total:a,redirectUrl:r,cardToken:o,nonce:ajax_var_checkout.nonce_finish_mollie},success:function(e){var{success:e,checkoutUrl:t,errorMessage:a}=e;e&&t?window.location.href=t:(g(!1),console.log(a,"success false for create payment"))}})},error:function(e){console.log(e,"error")}})}}})});