jQuery(document).ready(function(d){function r(t){return new Intl.NumberFormat(ajax_var.locale.replace("_","-"),{style:"currency",currency:ajax_var.currency_name}).format(t)}function l(t,a){a?(t.attr("disabled","disabled"),t.html('<svg aria-hidden="true" role="status" class="mr-2 inline h-5 w-5 animate-spin text-indigo-400" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                        <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path>\n                                        <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="#FFF"></path>\n                                    </svg>')):(t.removeAttr("disabled"),t.html(ajax_var.add_to_cart_text))}function o(t,a){window.matchMedia("(min-width: 750px)").matches?t.offset().left+t.outerWidth(!0)<d(window).outerWidth()/2?a.css({left:0,right:"auto"}):a.css({left:"auto",right:0}):a.removeAttr("style")}d(".select_option_wpb").on("change",function(t){t.preventDefault(),$thisselect=d(this),$form=$thisselect.closest("form.cart"),variations=$form.find("input[name=variations]").val()||"",null!=$thisselect.attr("id").match("opt_visuel_gc")&&($img=d('[for="'+$thisselect.attr("id")+'"] img'),d(".imggalfirst img").attr("src",$img.attr("src")),d(".zoomImg").attr("src",$img.attr("src")));var e=!0,t=d("#formcartsingle").serializeArray().filter(function(t){return-1!==t.name.indexOf("select")});const i=[];if(d(t).each(function(t,a){if(""==a.value)return e=!1;i.push(a.value)}),!0===e)d(".add_btn_single").show(),d(".show_rupture_stock").hide(),d(".show_inactif_option").hide(),d(".current_price_before_reduction").removeClass("hidden"),d(".choose_qty").removeClass("hidden"),d(".current_price_before_reduction").hide(),d.each(ajax_var.variations,function(t,a){if(function t(a,e){if(a.length!=e.length)return!1;for(var i=0;i<a.length;i++)if(Array.isArray(a[i])&&Array.isArray(e[i])){if(!t(a[i],e[i]))return!1}else if(a[i]!=e[i])return!1;return!0}(i,a.options)){if(a?.recursive&&1==a.recursive)for(var e of JSON.parse(ajax_var.licenses))if(e.variant_id==a.id){d("#product_subscription").val(JSON.stringify(e));break}d("input[name=quantity]").val(1),""==ajax_var.product_continu_rupture&&1!=ajax_var.product_continu_rupture&&d("input[name=quantity]").attr("max",a.quantity);let t=r(a.price);null!=a.price_before_reduction&&""!=a.price_before_reduction&&(t='<span class="before-reduction-price">'+r(a.price_before_reduction)+"</span>&nbsp;"+t),a?.recursive&&1==a.recursive&&(t+=" for "+a.recursive_number+" "+a.recursive_type),d("#current_price").html(t),null!=a.image_temp&&""!=a.image_temp?(d("#tabs-2-panel-1 img").attr("src",ajax_var.app_wpboutik+a.image_temp),d(".showimggalery:first-child img").attr("src",ajax_var.app_wpboutik+a.image_temp)):(d("#tabs-2-panel-1 img").attr("src",ajax_var.product_first_image),d(".showimggalery:first-child img").attr("src",ajax_var.product_first_image)),d("input[name=variation_id]").val(a.id),d("input[name=product_sku]").val(a.sku),d("input[name=product_name]").val(ajax_var.product_name+" - "+a.name.join(", ")),1==d('input[name="product_gestion_stock"]').val()&&"0"==a.quantity&&(d(".add_btn_single").hide(),d(".show_rupture_stock").show()),"0"==a.status&&(d(".add_btn_single").hide(),d(".show_rupture_stock").hide(),d(".show_inactif_option").show(),d("#current_price").html(""),d(".current_price_before_reduction").hide())}});else{d(".choose_qty").addClass("hidden"),d("input[name=quantity]").val(1),""!=ajax_var.product_continu_rupture&&1!=ajax_var.product_continu_rupture&&d("input[name=quantity]").attr("max",ajax_var.product_qty);let t="";element?.recursive&&1==element.recursive&&(t+=" for "+element.recursive_number+" "+element.recursive_type),d("#current_price").html(ajax_var.product_price+ajax_var.currency+t),d("#tabs-2-panel-1 img").attr("src",ajax_var.product_first_image),d(".showimggalery:first-child img").attr("src",ajax_var.product_first_image),null!=ajax_var.product_price_before_reduction&&""!=ajax_var.product_price_before_reduction&&(d(".current_price_before_reduction").show(),d(".current_price_before_reduction span").html(ajax_var.product_price_before_reduction)),0<ajax_var.variations.length&&d(".current_price_before_reduction").addClass("hidden"),d("input[name=variation_id]").val(0),d("input[name=product_sku]").val(ajax_var.product_sku),d("input[name=product_name]").val(ajax_var.product_name),d(".show_inactif_option").hide()}}),d(".wpb-opt-price input").on("change",function(){d("#opt_price_gc_custom").is(":checked")?d(".wpb-field-price").removeClass("hidden"):d(".wpb-field-price").addClass("hidden")}),d("input#gift_card_price").on("input",function(){let t=0;""!=d(this).val()&&(t+=+d(this).val()),d("#current_price").html(r(t))}),d(".wpboutik_single_add_to_cart_button").on("click",function(t){t.preventDefault();let a=d(this),e=a.closest("form.cart"),i=a.data("nonce"),r=e.find("input[name=quantity]").val()||1,n=e.find("input[name=product_id]").val()||0,o=e.find("input[name=product_sku]").val()||"",c=e.find("input[name=variation_id]").val()||0,u=(product_name=e.find("input[name=product_name]").val()||"",{});e.find(".customizable_fields").each(function(){u[d(this).attr("name")]=d(this).val()});var s=!0,t=d("#formcartsingle").serializeArray().filter(function(t){return-1!==t.name.indexOf("select")});if(1<=t.length&&d(t).each(function(t,a){if(""==a.value)return s=!1}),!1===s)return window.alert(ajax_var.i18n_make_a_selection_text),!1;l(a,!0);t={action:"wpboutik_ajax_add_to_cart",product_id:n,product_sku:o,quantity:r,variation_id:c,product_name:product_name,nonce:i,customization:u};d.ajax({type:"post",url:ajax_var.url,data:t,success:function(t){l(a,!1),t&&t.fragments&&(d(".wpboutik-cart-count").removeClass("hidden"),d(".wpboutik-cart-count").addClass("absolute"),d(".wpboutik-cart-count").html(t.count_product),d(".view-cartwpb-"+t.product_id).removeClass("hidden"),d(".view-cartwpb-"+t.product_id).show(),d.each(t.fragments,function(t,a){d("."+t).replaceWith(a)}))}})}),d(".wpb-resiliation").on("click",function(t){t.preventDefault();t={action:"wpboutik_stop_payment_license",subscription:d(this).data("subscription"),nonce:ajax_var.nonce_licenses_remove};d.ajax({type:"post",url:ajax_var.url,data:t,success:function(t){window.location.reload()}})}),d(".wpb-manage-urls").on("click",function(t){t.preventDefault();let i=d('<ul class="wpb-urls-list"></ul>');t=d(this).data("urls");let r=d(this).data("license");if(t.length)for(let e of t){let a=d(`<li>${e.url}</li>`);var n=d('<a class="wpb-btn" href="#">Supprimer</a>');n.on("click",function(t){t.preventDefault(),d.ajax({type:"post",url:ajax_var.url,data:{action:"wpboutik_ajax_remove_url_license",nonce:ajax_var.nonce_licenses_remove_url,subscription:r,url:e.id},success:()=>{a.remove(),d("#licenses-user-table").load(window.location.href+" #licenses-user-table > *"),i.is(":empty")&&d(".wpb-popup-layout").remove()}})}),a.append(n),i.append(a)}{t="Gestion des urls";var e=i;let a=d('<div class="wpb-popup-layout"></div>');var o=d('<div class="wpb-popup"></div>'),t=d(`<div class="wpb-popup-header">${t}</div>`),c=d('<a href="#" class="wpb-close-popup"><svg xmlns="http://www.w3.org/2000/svg" width="1.1em" height="1.1em" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/></svg></a>');t.append(c),o.append(t),o.append(e),a.append(o),d("body").append(a),c.on("click",function(t){t.preventDefault(),a.remove()}),a.on("click",function(t){t.target.classList.contains("wpb-popup-layout")&&d(this).remove()})}}),d(".wpb-renew").on("click",function(t){t.preventDefault();t={action:"wpboutik_ajax_add_to_cart_renew",product_id:d(this).data("product"),varaiant_id:d(this).data("variant"),code:d(this).data("code"),nonce:ajax_var.nonce_licenses_renew};d.ajax({type:"post",url:ajax_var.url,data:t,success:function(t){window.location.reload()}})}),d(".create_mail_back_in_stock").on("click",function(t){t.preventDefault(),$thisbutton=d(this),$form=$thisbutton.closest("form.cart"),nonce=$thisbutton.data("nonce"),product_id=$thisbutton.data("product_id")||0,variation_id=$form.find("input[name=variation_id]").val()||0,email=$form.find("input[name=mail_backinstock]").val()||0;t={action:"wpboutik_ajax_create_mail_back_in_stock",product_id:product_id,variation_id:variation_id,email:email,nonce:nonce};d.ajax({type:"post",url:ajax_var.url,data:t,success:function(t){d(".create_mail_back_in_stock_form").html(""),d(".create_mail_back_in_stock_form").html("Votre demande a bien été prise en compte.")}})}),d(document).on("click",".wpboutik_archive_add_to_cart_button",function(t){t.preventDefault(),$thisbutton=d(this),nonce=$thisbutton.data("nonce"),product_qty=1,product_id=$thisbutton.data("product_id")||0,product_sku=$thisbutton.data("product_sku")||0,variation_id=$thisbutton.data("variation_id")||0,product_name=$thisbutton.data("product_name")||"",l($thisbutton,!0);t={action:"wpboutik_ajax_add_to_cart",product_id:product_id,product_sku:product_sku,quantity:product_qty,variation_id:variation_id,product_name:product_name,nonce:nonce};d.ajax({type:"post",url:ajax_var.url,data:t,success:function(t){l($thisbutton,!1),t&&t.fragments&&(d(".wpboutik-cart-count").removeClass("hidden"),d(".wpboutik-cart-count").addClass("absolute"),d(".wpboutik-cart-count").html(t.count_product),d(".view-cartwpb-"+t.product_id).removeClass("hidden"),d(".view-cartwpb-"+t.product_id).show(),d.each(t.fragments,function(t,a){d("."+t).replaceWith(a)}))}})}),d(document).on("click",".wpboutik_single_remove_to_cart_button",function(t){t.preventDefault(),$thisbutton=d(this),nonce=$thisbutton.data("nonce"),cart_item_key=$thisbutton.data("cart_item_key");t={action:"wpboutik_ajax_remove_to_cart",product_id:product_id=$thisbutton.data("product_id"),nonce:nonce,cart_item_key:cart_item_key};d.ajax({type:"post",url:ajax_var.url,data:t,success:function(t){t.count_product?(d(".wpboutik-cart-count").html(t.count_product),d("#subtotal").html(t.subtotal),d("#ordertotal").html(t.ordertotal),d(".ordertotal_mini").html(t.subtotal)):(d(".wpboutik-cart-count").addClass("hidden"),d("#formcartwpb").html(ajax_var.cart_empty_html)),$thisbutton.closest("li").addClass("hidden"),t.fragments&&d.each(t.fragments,function(t,a){d("."+t).replaceWith(a)})}})}),d(document).on("keyup mouseup",".changeqty",function(){var t=d(this),a=t.val(),e=t.data("nonce"),i=t.data("product_id"),t=t.data("variation_id");d.ajax({type:"post",url:ajax_var.url,data:{action:"wpboutik_ajax_update_qty_to_cart",quantity:a,product_id:i,variation_id:t,nonce:e},success:function(t){t.count_product&&(d(".wpboutik-cart-count").html(t.count_product),d("#subtotal").html(t.subtotal),d("#ordertotal").html(t.ordertotal),d(".ordertotal_mini").html(t.subtotal)),d.each(t.fragments,function(t,a){d(".WPBpanierDropdown");d("."+t).each(function(){d(this).html(d(a).html())})})}})}),d(".wpboutik-Tabs-panel").not(":first").hide(),d(".navsinglewpb a").click(function(t){t.preventDefault();t=d(this).attr("href");d(".wpboutik-Tabs-panel").hide(),d(t).show(),d(".navsinglewpb a").removeClass("active"),d(this).addClass("active")}),d("#tabs").change(function(){var t=d(this).val();d(".wpboutik-Tabs-panel").hide(),d("#"+t).show()}),d(document).on("click",function(t){var a;d(t.target).parents(".search_product_box.search-input-filled").length||(t=d(".search_product_box.search-input-filled")).length&&((a=t.find("input")).val(""),a.removeClass("search-input-filled"),t.removeClass("visible"),t.find(".wpb-search-results").html(""))}),d(".search_product_box").each(function(){let a=d(this);var t=a.parent().parent("ul"),e=a.prev("a.search_product_link"),i=a.find(".close_search_product");let r=a.find("input#wpb-product-search"),n=a.find(".wpb-search-results");o(a,n),d(window).on("resize",function(){o(a,n)}),a.hasClass("visible-input")||a.css({height:t.outerHeight(),width:t.outerWidth()}),e.click(function(t){t.preventDefault(),a.addClass("visible"),a.addClass("currently-target"),setTimeout(function(){r.focus()},500)}),i.click(function(t){t.preventDefault(),r.val(""),n.html(""),a.removeClass("visible")}),r.on("input",function(){d(this).parents(".search_product_box").addClass("search-input-filled");var t=d(this).val();3<=t.length?d.ajax({type:"post",url:ajax_var.url,data:{action:"wpb_search_products",search_query:t,no_detail:!a.parent().hasClass("menu-item-search-product")},success:function(t){n.html(t)},error:function(t,a,e){console.error(e)}}):t.length?n.html('<p class="empty-search-product-response">La recherche nécessite au minimum 3 caractères</p>'):n.html("")})}),d(document).on("mouseenter",".search_product_box .search-result",function(){var t=d(this).attr("data-target");d(".search-product-details#"+t).addClass("focus")}),d(document).on("mouseleave",".search_product_box .search-result",function(){var t=d(this).attr("data-target");d(".search-product-details#"+t).removeClass("focus")}),d(".WPBpanierBtn").each(function(){d(this).click(function(t){t.preventDefault(),d(this).next(".WPBpanierDropdown").removeClass("hidden")})}),d(document).on("click",".WPBpanierDropdown-overlay",function(){d(this).prev(".WPBpanierDropdown").addClass("hidden")}),d(".product-item").hover(function(){0<d(this).find("img.hover").length&&(d(this).find("img.default").css("opacity","0"),d(this).find("img.hover").css("opacity","1"))},function(){0<d(this).find("img.hover").length&&(d(this).find("img.default").css("opacity","1"),d(this).find("img.hover").css("opacity","0"))})});